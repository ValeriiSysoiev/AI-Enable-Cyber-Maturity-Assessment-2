(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{54298:function(e,t,n){Promise.resolve().then(n.bind(n,57340))},57340:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n(57437),i=n(2265),s=n(99376),r=n(11265);function u(){let e=(0,s.useRouter)(),{isAuthenticated:t,isLoading:n,mode:u}=(0,r.aC)();return((0,i.useEffect)(()=>{n||(t?e.replace("/engagements"):e.replace("/signin"))},[t,n,e]),n)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"AI-Enabled Cyber Maturity Assessment"}),(0,a.jsx)("p",{className:"text-gray-600 mb-8",children:"Redirecting..."})]})})}},11265:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return u},QL:function(){return c},aC:function(){return o}});var a=n(57437),i=n(2265),s=n(99376);let r=(0,i.createContext)(null);function u(e){let{children:t}=e,[n,u]=(0,i.useState)(null),[o,c]=(0,i.useState)({mode:"demo",enabled:!0}),[l,d]=(0,i.useState)(!0),[m,f]=(0,i.useState)();async function h(){try{d(!0),f(void 0);let e=await fetch("/api/auth/mode");if(e.ok){let t=await e.json();if(c(t),"aad"===t.mode&&t.enabled){let e=await fetch("/api/auth/session");if(e.ok){let t=await e.json();t.user&&u({id:t.user.id,email:t.user.email,name:t.user.name,roles:t.user.roles,tenant_id:t.user.tenant_id})}}else{let e=localStorage.getItem("email");e&&u({id:e,email:e,name:e.split("@")[0]})}}}catch(t){console.error("Auth initialization failed:",t),f(t instanceof Error?t.message:"Authentication failed"),c({mode:"demo",enabled:!0});let e=localStorage.getItem("email");e&&u({id:e,email:e,name:e.split("@")[0]})}finally{d(!1)}}return(0,s.useRouter)(),(0,i.useEffect)(()=>{h()},[]),(0,a.jsx)(r.Provider,{value:{user:n,mode:o,isAuthenticated:!!n,isLoading:l,error:m},children:t})}function o(){let e=(0,i.useContext)(r);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}function c(){let e=o(),t=(0,s.useRouter)();return(0,i.useEffect)(()=>{e.isLoading||e.isAuthenticated||("aad"===e.mode.mode?window.location.href="/api/auth/signin":t.push("/signin"))},[e.isLoading,e.isAuthenticated,e.mode.mode,t]),e}},99376:function(e,t,n){"use strict";var a=n(35475);n.o(a,"useParams")&&n.d(t,{useParams:function(){return a.useParams}}),n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=54298)}),_N_E=e.O()}]);