(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30],{57973:function(e,t,r){Promise.resolve().then(r.bind(r,93084))},93084:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return a}});var n=r(57437),o=r(2265),s=r(96264);function a(){let[e,t]=(0,o.useState)([]),[r,a]=(0,o.useState)("");async function c(){try{let e=await fetch("".concat(s.Sg,"/presets"),{headers:(0,s.$V)()});if(!e.ok){a("Failed to load presets: ".concat(e.status));return}t(await e.json())}catch(e){a("Error loading presets: ".concat(e))}}async function i(e){e.preventDefault();let t=new FormData(e.currentTarget);try{let r=await fetch("".concat(s.Sg,"/presets/upload"),{method:"POST",headers:{...(0,s.$V)()},body:t});if(!r.ok){let e=await r.text();a("Upload failed: ".concat(r.status," - ").concat(e));return}let n=await r.json();a("Uploaded: ".concat(n.name," (").concat(n.id,")")),await c(),e.currentTarget.reset()}catch(e){a("Upload error: ".concat(e))}}return(0,o.useEffect)(()=>{c()},[]),(0,n.jsxs)("div",{className:"p-6 space-y-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold",children:"Admin \xb7 Presets"}),(0,n.jsxs)("form",{onSubmit:i,className:"border rounded p-4 space-y-3",children:[(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"Upload a preset JSON"}),(0,n.jsx)("input",{name:"file",type:"file",accept:"application/json",className:"border rounded p-2",required:!0}),(0,n.jsx)("button",{className:"px-3 py-1 border rounded bg-blue-500 text-white hover:bg-blue-600",type:"submit",children:"Upload"}),r&&(0,n.jsx)("div",{className:"text-sm",children:r})]}),(0,n.jsxs)("div",{className:"border rounded p-4",children:[(0,n.jsx)("div",{className:"font-medium mb-2",children:"Available Presets"}),(0,n.jsxs)("table",{className:"w-full text-sm",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"border-b",children:[(0,n.jsx)("th",{className:"text-left py-2",children:"Name"}),(0,n.jsx)("th",{className:"text-left py-2",children:"ID"}),(0,n.jsx)("th",{className:"text-left py-2",children:"Version"}),(0,n.jsx)("th",{className:"text-left py-2",children:"Counts (P/C/Q)"}),(0,n.jsx)("th",{className:"text-left py-2",children:"Source"}),(0,n.jsx)("th",{className:"text-left py-2",children:"Actions"})]})}),(0,n.jsx)("tbody",{children:e.map(e=>(0,n.jsxs)("tr",{className:"border-t",children:[(0,n.jsx)("td",{className:"py-2",children:e.name}),(0,n.jsx)("td",{className:"py-2 font-mono text-xs",children:e.id}),(0,n.jsx)("td",{className:"py-2",children:e.version}),(0,n.jsxs)("td",{className:"py-2",children:[e.counts.pillars,"/",e.counts.capabilities,"/",e.counts.questions]}),(0,n.jsx)("td",{className:"py-2",children:(0,n.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("bundled"===e.source?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"),children:e.source})}),(0,n.jsxs)("td",{className:"py-2 space-x-2",children:[(0,n.jsx)("a",{className:"underline text-blue-600 hover:text-blue-800",href:"".concat(s.Sg,"/presets/").concat(e.id),target:"_blank",rel:"noopener noreferrer",children:"Preview"}),(0,n.jsx)("button",{className:"underline text-gray-600 hover:text-gray-800",onClick:()=>navigator.clipboard.writeText(e.id),children:"Copy ID"})]})]},e.id))})]}),0===e.length&&(0,n.jsx)("div",{className:"text-gray-500 text-center py-4",children:"No presets available"})]})]})}},96264:function(e,t,r){"use strict";r.d(t,{$V:function(){return l},SC:function(){return a},Sg:function(){return i},tQ:function(){return c}});var n=r(15216);let o=r(20357).env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8000";function s(){let e=(0,n.OD)(),t=(0,n.K3)(),r={};return e&&(r["X-User-Email"]=e),t&&(r["X-Engagement-ID"]=t),r}async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=s(),n=new AbortController,a=setTimeout(()=>n.abort(),t.timeout||3e4);try{let s=await fetch("".concat(o).concat(e),{...t,signal:n.signal,headers:{...r,...t.headers}});if(clearTimeout(a),!s.ok){let e=await s.json().catch(()=>({detail:"Request failed"}));throw Error(e.detail||"Request failed: ".concat(s.status))}return s.json()}catch(e){if(clearTimeout(a),e instanceof Error&&"AbortError"===e.name)throw Error("Request timeout - please try again");throw e}}async function c(e){let t=new AbortController,r=setTimeout(()=>t.abort(),3e4);try{let n=await fetch("".concat(o,"/presets/").concat(e),{cache:"no-store",signal:t.signal});if(clearTimeout(r),!n.ok)throw Error("Preset ".concat(e," not found"));return n.json()}catch(t){if(clearTimeout(r),t instanceof Error&&"AbortError"===t.name)throw console.error("Preset fetch timeout:",e),Error("Request timeout - please try again");throw console.error("Error fetching preset:",t),t}}let i=o;function l(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=s();return e||(t["Content-Type"]="application/json"),t}},15216:function(e,t,r){"use strict";r.d(t,{GJ:function(){return i},K3:function(){return s},OD:function(){return o},Pk:function(){return c},d8:function(){return a}});var n=r(20357);function o(){return localStorage.getItem("email")||""}function s(){return localStorage.getItem("engagementId")||""}function a(e){localStorage.setItem("engagementId",e)}async function c(e){return o()||(await e.push("/signin"),"")}function i(){let e=o();return(n.env.NEXT_PUBLIC_ADMIN_EMAILS||"").split(",").map(e=>e.trim().toLowerCase()).includes(e.toLowerCase())}},20357:function(e,t,r){"use strict";var n,o;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(o=r.g.process)?void 0:o.env)?r.g.process:r(88081)},88081:function(e){!function(){var t={229:function(e){var t,r,n,o=e.exports={};function s(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function c(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var i=[],l=!1,u=-1;function d(){l&&n&&(l=!1,n.length?i=n.concat(i):u=-1,i.length&&f())}function f(){if(!l){var e=c(d);l=!0;for(var t=i.length;t;){for(n=i,i=[];++u<t;)n&&n[u].run();u=-1,t=i.length}n=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];i.push(new h(e,t)),1!==i.length||l||c(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=p,o.addListener=p,o.once=p,o.off=p,o.removeListener=p,o.removeAllListeners=p,o.emit=p,o.prependListener=p,o.prependOnceListener=p,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var s=r[e]={exports:{}},a=!0;try{t[e](s,s.exports,n),a=!1}finally{a&&delete r[e]}return s.exports}n.ab="//";var o=n(229);e.exports=o}()}},function(e){e.O(0,[971,23,744],function(){return e(e.s=57973)}),_N_E=e.O()}]);