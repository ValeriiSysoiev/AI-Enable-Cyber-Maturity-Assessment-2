(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{99703:function(e,t,n){Promise.resolve().then(n.t.bind(n,58877,23)),Promise.resolve().then(n.bind(n,57163)),Promise.resolve().then(n.bind(n,25990))},57163:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return i},QL:function(){return u},aC:function(){return o}});var a=n(57437),l=n(2265),s=n(16463);let r=(0,l.createContext)(null);function i(e){let{children:t}=e,[n,i]=(0,l.useState)(null),[o,u]=(0,l.useState)({mode:"demo",enabled:!0}),[d,c]=(0,l.useState)(!0),[f,m]=(0,l.useState)();async function h(){try{c(!0),m(void 0);let e=await fetch("/api/auth/mode");if(e.ok){let t=await e.json();if(u(t),"aad"===t.mode&&t.enabled){let e=await fetch("/api/auth/session");if(e.ok){let t=await e.json();t.user&&i({id:t.user.id,email:t.user.email,name:t.user.name,roles:t.user.roles,tenant_id:t.user.tenant_id})}}else{let e=localStorage.getItem("email");e&&i({id:e,email:e,name:e.split("@")[0]})}}}catch(t){console.error("Auth initialization failed:",t),m(t instanceof Error?t.message:"Authentication failed"),u({mode:"demo",enabled:!0});let e=localStorage.getItem("email");e&&i({id:e,email:e,name:e.split("@")[0]})}finally{c(!1)}}return(0,s.useRouter)(),(0,l.useEffect)(()=>{h()},[]),(0,a.jsx)(r.Provider,{value:{user:n,mode:o,isAuthenticated:!!n,isLoading:d,error:f},children:t})}function o(){let e=(0,l.useContext)(r);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}function u(){let e=o(),t=(0,s.useRouter)();return(0,l.useEffect)(()=>{e.isLoading||e.isAuthenticated||("aad"===e.mode.mode?window.location.href="/api/auth/signin":t.push("/signin"))},[e.isLoading,e.isAuthenticated,e.mode.mode,t]),e}},25990:function(e,t,n){"use strict";n.d(t,{default:function(){return c}});var a=n(57437),l=n(50551),s=n.n(l),r=n(16463),i=n(2265),o=n(87138),u=n(57163);let d=s()(()=>n.e(278).then(n.bind(n,39278)),{loadableGenerated:{webpack:()=>[39278]},ssr:!1});function c(){let e=(0,r.usePathname)(),[t,n]=(0,i.useState)(null),l=(0,u.aC)();async function s(){"aad"===l.mode.mode?window.location.href="/api/auth/signout":(localStorage.removeItem("email"),localStorage.removeItem("engagementId"),window.location.href="/signin")}return(0,i.useEffect)(()=>{let t=e.match(/^\/e\/([^\/]+)/);t?n(t[1]):n(null)},[e]),(0,a.jsx)("nav",{className:"bg-white border-b px-8 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-8",children:[(0,a.jsx)("h1",{className:"text-lg font-semibold",children:"AI Maturity Tool"}),(0,a.jsxs)("div",{className:"flex space-x-6",children:[(0,a.jsx)("a",{href:"/",className:"text-sm hover:text-blue-600",children:"Home"}),(0,a.jsx)("a",{href:"/new",className:"text-sm hover:text-blue-600",children:"New Assessment"}),(0,a.jsx)("a",{href:"/engagements",className:"text-sm hover:text-blue-600",children:"Engagements"}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.default,{href:"/e/".concat(t,"/dashboard"),className:"text-sm hover:text-blue-600",children:"Dashboard"}),(0,a.jsx)(o.default,{href:"/e/".concat(t,"/demo"),className:"text-sm hover:text-blue-600",children:"Demo"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[l.isAuthenticated&&l.user&&(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:l.user.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,a.jsx)("span",{className:"inline-block w-2 h-2 rounded-full ".concat("aad"===l.mode.mode?"bg-green-500":"bg-blue-500")}),"aad"===l.mode.mode?"Azure AD":"Demo Mode"]})]}),(0,a.jsx)("button",{onClick:s,className:"text-sm text-gray-600 hover:text-gray-900 px-2 py-1 rounded hover:bg-gray-100",children:"Sign Out"})]}),(0,a.jsx)(d,{})]})]})})}},50551:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let a=n(99920);n(57437),n(2265);let l=a._(n(40148));function s(e,t){var n;let a={loading:e=>{let{error:t,isLoading:n,pastDelay:a}=e;return null}};"function"==typeof e&&(a.loader=e);let s={...a,...t};return(0,l.default)({...s,modules:null==(n=s.loadableGenerated)?void 0:n.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},10912:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return l}});let a=n(55592);function l(e){let{reason:t,children:n}=e;if("undefined"==typeof window)throw new a.BailoutToCSRError(t);return n}},40148:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return u}});let a=n(57437),l=n(2265),s=n(10912),r=n(61481);function i(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},u=function(e){let t={...o,...e},n=(0,l.lazy)(()=>t.loader().then(i)),u=t.loading;function d(e){let i=u?(0,a.jsx)(u,{isLoading:!0,pastDelay:!0,error:null}):null,o=t.ssr?(0,a.jsxs)(a.Fragment,{children:["undefined"==typeof window?(0,a.jsx)(r.PreloadCss,{moduleIds:t.modules}):null,(0,a.jsx)(n,{...e})]}):(0,a.jsx)(s.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(n,{...e})});return(0,a.jsx)(l.Suspense,{fallback:i,children:o})}return d.displayName="LoadableComponent",d}},61481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return s}});let a=n(57437),l=n(58512);function s(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let n=(0,l.getExpectedRequestStore)("next/dynamic css"),s=[];if(n.reactLoadableManifest&&t){let e=n.reactLoadableManifest;for(let n of t){if(!e[n])continue;let t=e[n].files.filter(e=>e.endsWith(".css"));s.push(...t)}}return 0===s.length?null:(0,a.jsx)(a.Fragment,{children:s.map(e=>(0,a.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:n.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},58877:function(){}},function(e){e.O(0,[404,291,971,23,744],function(){return e(e.s=99703)}),_N_E=e.O()}]);