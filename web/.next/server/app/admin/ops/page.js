(()=>{var e={};e.id=805,e.ids=[805],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8341:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>o}),t(6733),t(6698),t(5866);var a=t(3191),r=t(8716),n=t(7922),i=t.n(n),l=t(5231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(s,d);let o=["",{children:["admin",{children:["ops",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6733)),"/Users/valsysoiev/AI-Enable-Cyber-Maturity-Assessment-2/web/app/admin/ops/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,6698)),"/Users/valsysoiev/AI-Enable-Cyber-Maturity-Assessment-2/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/valsysoiev/AI-Enable-Cyber-Maturity-Assessment-2/web/app/admin/ops/page.tsx"],x="/admin/ops/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/ops/page",pathname:"/admin/ops",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},2750:(e,s,t)=>{Promise.resolve().then(t.bind(t,9345))},9345:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var a=t(326),r=t(7577),n=t(6824),i=t(3820),l=t(2991);function d({className:e=""}){let[s,t]=(0,r.useState)(!1),[n,d]=(0,r.useState)(null),[o,c]=(0,r.useState)(null),[x,m]=(0,r.useState)("");if(!(0,l.GJ)())return null;async function u(){if(!x.trim()){c("Please enter an engagement ID");return}try{t(!0),c(null),d(null);let e=await (0,i.kR)({engagement_id:x.trim(),force:!0});d(e)}catch(e){c(e instanceof Error?e.message:"Bulk reindex failed")}finally{t(!1)}}async function p(){try{t(!0),c(null),d(null);let e=await (0,i.kR)({engagement_id:"*",force:!0});d(e)}catch(e){c(e instanceof Error?e.message:"Global reindex failed")}finally{t(!1)}}return(0,a.jsxs)("div",{className:`rounded-xl border p-4 space-y-4 ${e}`,children:[a.jsx("div",{className:"font-medium text-lg",children:"Evidence Administration"}),a.jsx("div",{className:"text-sm text-gray-600",children:"Admin-only tools for managing evidence search indexes"}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("div",{className:"font-medium",children:"Reindex Engagement"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:x,onChange:e=>m(e.target.value),placeholder:"Enter engagement ID",className:"flex-1 px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:s}),a.jsx("button",{onClick:u,disabled:s||!x.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Reindexing...":"Reindex"})]})]}),(0,a.jsxs)("div",{className:"space-y-3 pt-4 border-t",children:[a.jsx("div",{className:"font-medium",children:"Global Operations"}),a.jsx("div",{className:"flex gap-2",children:a.jsx("button",{onClick:p,disabled:s,className:"px-4 py-2 bg-orange-600 text-white rounded-md text-sm hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Reindexing...":"Reindex All Engagements"})}),a.jsx("div",{className:"text-xs text-gray-500",children:"⚠️ This will reindex all documents across all engagements. Use with caution."})]}),o&&(0,a.jsxs)("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded px-3 py-2",children:["Error: ",o]}),n&&(0,a.jsxs)("div",{className:"text-sm text-green-600 bg-green-50 border border-green-200 rounded px-3 py-2",children:[(0,a.jsxs)("div",{className:"font-medium",children:["✓ ",n.message]}),(0,a.jsxs)("div",{className:"text-xs mt-1",children:["Documents queued: ",n.documents_queued,n.estimated_completion_time&&(0,a.jsxs)(a.Fragment,{children:[" • Estimated completion: ",n.estimated_completion_time]})]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t text-xs text-gray-500 space-y-1",children:[a.jsx("div",{children:"• Documents are processed in the background"}),a.jsx("div",{children:"• Check individual engagement dashboards for ingestion status"}),a.jsx("div",{children:"• Large document sets may take several minutes to process"})]})]})}var o=t(9682);function c(){let[e,s]=(0,r.useState)("presets"),[t,i]=(0,r.useState)([]),[c,x]=(0,r.useState)(""),m=(0,o.QL)();async function u(){try{let e=await fetch(`${n.Sg}/presets`,{headers:(0,n.$V)()});if(!e.ok){x(`Failed to load presets: ${e.status}`);return}i(await e.json())}catch(e){x(`Error loading presets: ${e}`)}}async function p(e){e.preventDefault();let s=new FormData(e.currentTarget);try{let t=await fetch(`${n.Sg}/presets/upload`,{method:"POST",headers:{...(0,n.$V)()},body:s});if(!t.ok){let e=await t.text();x(`Upload failed: ${t.status} - ${e}`);return}let a=await t.json();x(`Uploaded: ${a.name} (${a.id})`),await u(),e.currentTarget.reset()}catch(e){x(`Upload error: ${e}`)}}return m.isLoading?a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"text-center",children:"Loading..."})}):(0,l.GJ)()?(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"Admin Operations"}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["User: ",m.user?.name," • Mode: ","aad"===m.mode.mode?"Azure AD":"Demo"]})]}),a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-8",children:[{id:"presets",label:"Presets Management"},{id:"evidence",label:"Evidence Management"}].map(t=>a.jsx("button",{onClick:()=>s(t.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${e===t.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:t.label},t.id))})}),"presets"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("form",{onSubmit:p,className:"border rounded p-4 space-y-3",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Upload a preset JSON"}),a.jsx("input",{name:"file",type:"file",accept:"application/json",className:"border rounded p-2",required:!0}),a.jsx("button",{className:"px-3 py-1 border rounded bg-blue-500 text-white hover:bg-blue-600",type:"submit",children:"Upload"}),c&&a.jsx("div",{className:"text-sm",children:c})]}),(0,a.jsxs)("div",{className:"border rounded p-4",children:[a.jsx("div",{className:"font-medium mb-2",children:"Available Presets"}),(0,a.jsxs)("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b",children:[a.jsx("th",{className:"text-left py-2",children:"Name"}),a.jsx("th",{className:"text-left py-2",children:"ID"}),a.jsx("th",{className:"text-left py-2",children:"Version"}),a.jsx("th",{className:"text-left py-2",children:"Counts (P/C/Q)"}),a.jsx("th",{className:"text-left py-2",children:"Source"}),a.jsx("th",{className:"text-left py-2",children:"Actions"})]})}),a.jsx("tbody",{children:t.map(e=>(0,a.jsxs)("tr",{className:"border-t",children:[a.jsx("td",{className:"py-2",children:e.name}),a.jsx("td",{className:"py-2 font-mono text-xs",children:e.id}),a.jsx("td",{className:"py-2",children:e.version}),(0,a.jsxs)("td",{className:"py-2",children:[e.counts.pillars,"/",e.counts.capabilities,"/",e.counts.questions]}),a.jsx("td",{className:"py-2",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs ${"bundled"===e.source?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:e.source})}),(0,a.jsxs)("td",{className:"py-2 space-x-2",children:[a.jsx("a",{className:"underline text-blue-600 hover:text-blue-800",href:`${n.Sg}/presets/${e.id}`,target:"_blank",rel:"noopener noreferrer",children:"Preview"}),a.jsx("button",{className:"underline text-gray-600 hover:text-gray-800",onClick:()=>navigator.clipboard.writeText(e.id),children:"Copy ID"})]})]},e.id))})]}),0===t.length&&a.jsx("div",{className:"text-gray-500 text-center py-4",children:"No presets available"})]})]}),"evidence"===e&&a.jsx(d,{className:"max-w-2xl"})]}):a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"text-red-600",children:"Access denied. Admin privileges required."})})}},6733:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>n,default:()=>l});var a=t(8570);let r=(0,a.createProxy)(String.raw`/Users/valsysoiev/AI-Enable-Cyber-Maturity-Assessment-2/web/app/admin/ops/page.tsx`),{__esModule:n,$$typeof:i}=r;r.default;let l=(0,a.createProxy)(String.raw`/Users/valsysoiev/AI-Enable-Cyber-Maturity-Assessment-2/web/app/admin/ops/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[948,878,206],()=>t(8341));module.exports=a})();