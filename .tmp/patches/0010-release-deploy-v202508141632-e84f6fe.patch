From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Valerii Sysoiev <valsysoiev@gmail.com>
Date: Thu, 14 Aug 2025 16:32:25 -0600
Subject: [PATCH 10/90] release: deploy v202508141632-e84f6fe


diff --git a/web/app/e/[engagementId]/demo/page.tsx b/web/app/e/[engagementId]/demo/page.tsx
index c60969cc8b592e031766a1a42c91df36af919304..21b9dfd0f765e8a7b6d931e4d8d4548f50535882 100644
--- a/web/app/e/[engagementId]/demo/page.tsx
+++ b/web/app/e/[engagementId]/demo/page.tsx
@@ -46,12 +46,15 @@ export default function EngagementDemo() {
   const [docMsg, setDocMsg] = useState<string>("");
 
   useEffect(() => {
-    const email = requireEmail(router);
-    if (email && engagementId) {
-      // Set the engagement ID for API calls
-      setEngagementId(engagementId);
-      refreshDocs();
-    }
+    const initAuth = async () => {
+      const email = await requireEmail(router);
+      if (email && engagementId) {
+        // Set the engagement ID for API calls
+        setEngagementId(engagementId);
+        refreshDocs();
+      }
+    };
+    initAuth();
   }, [engagementId, router]);
 
   async function refreshDocs() {
