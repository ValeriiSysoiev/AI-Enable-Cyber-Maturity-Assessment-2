(()=>{var e={};e.id=612,e.ids=[612],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},52821:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>d.a,__next_app__:()=>m,originalPathname:()=>o,pages:()=>x,routeModule:()=>h,tree:()=>c}),t(9977),t(56698),t(35866);var i=t(23191),a=t(88716),l=t(37922),d=t.n(l),r=t(95231),n={};for(let e in r)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>r[e]);t.d(s,n);let c=["",{children:["e",{children:["[engagementId]",{children:["evidence",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9977)),"/Users/valsysoiev/AI-Enable-Cyber-Maturity-Assessment-2/web/app/e/[engagementId]/evidence/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,56698)),"/Users/valsysoiev/AI-Enable-Cyber-Maturity-Assessment-2/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],x=["/Users/valsysoiev/AI-Enable-Cyber-Maturity-Assessment-2/web/app/e/[engagementId]/evidence/page.tsx"],o="/e/[engagementId]/evidence/page",m={require:t,loadChunk:()=>Promise.resolve()},h=new i.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/e/[engagementId]/evidence/page",pathname:"/e/[engagementId]/evidence",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},27576:(e,s,t)=>{Promise.resolve().then(t.bind(t,69939))},69939:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var i=t(10326),a=t(17577),l=t(35047),d=t(44392),r=t(23820);function n({onEvidenceSelect:e,refreshTrigger:s=0,className:t="",showLinkActions:d=!1}){let{engagementId:n}=(0,l.useParams)(),[c,x]=(0,a.useState)(null),[o,m]=(0,a.useState)(!0),[h,u]=(0,a.useState)(null),[g,p]=(0,a.useState)(1),[v,j]=(0,a.useState)(20),[b,y]=(0,a.useState)(null),[N,f]=(0,a.useState)(null),[w,k]=(0,a.useState)({itemType:"assessment",itemId:""}),C=(0,a.useCallback)(async()=>{if(n){m(!0),u(null);try{let e=await (0,r.q8)(n,g,v);x(e)}catch(e){u(e instanceof Error?e.message:"Failed to load evidence")}finally{m(!1)}}},[n,g,v]),D=(0,a.useCallback)(e=>{p(e)},[]),_=(0,a.useCallback)(e=>{j(e),p(1)},[]),I=(0,a.useCallback)(async(e,s,t)=>{if(confirm("Remove this link?")){y(e);try{await (0,r.fG)(e,`${s}:${t}`),await C()}catch(e){alert(e instanceof Error?e.message:"Failed to unlink evidence")}finally{y(null)}}},[C]),P=(0,a.useCallback)(async e=>{if(!w.itemType.trim()||!w.itemId.trim()){alert("Please enter both item type and item ID");return}y(e);try{await (0,r.tc)(e,{item_type:w.itemType.trim(),item_id:w.itemId.trim()}),f(null),k({itemType:"assessment",itemId:""}),await C()}catch(e){alert(e instanceof Error?e.message:"Failed to create link")}finally{y(null)}},[w,C]),S=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return o?i.jsx("div",{className:`${t}`,role:"status","aria-live":"polite",children:i.jsx("div",{className:"flex items-center justify-center py-8",children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),i.jsx("div",{className:"text-gray-600",children:"Loading evidence..."})]})})}):h?i.jsx("div",{className:`${t}`,role:"alert","aria-live":"assertive",children:i.jsx("div",{className:"flex items-center justify-center py-8",children:(0,i.jsxs)("div",{className:"text-red-600 flex items-center gap-2",children:[i.jsx("span",{className:"text-xl",children:"⚠️"}),(0,i.jsxs)("span",{children:["Error: ",h]})]})})}):c&&0!==c.data.length?(0,i.jsxs)("div",{className:`space-y-4 ${t}`,children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Evidence Files"}),(()=>{if(!c)return null;let{total:e,page:s,page_size:t}=c,a=Math.min(s*t,e);return(0,i.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",(s-1)*t+1,"-",a," of ",e," evidence files"]})})()]}),i.jsx("div",{className:"overflow-hidden rounded-lg border",children:(0,i.jsxs)("table",{className:"w-full",role:"table","aria-label":"Evidence files list",children:[i.jsx("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"File"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Size"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Uploaded"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Links"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.data.map(s=>(0,i.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>e?.(s),role:"row",tabIndex:0,onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),e?.(s))},"aria-label":`Evidence file ${s.filename}`,children:[i.jsx("td",{className:"px-4 py-4",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-lg mr-3",children:(0,r.LP)(s.mime_type)}),(0,i.jsxs)("div",{children:[i.jsx("div",{className:"text-sm font-medium text-gray-900 truncate max-w-xs",children:s.filename}),i.jsx("div",{className:"text-xs text-gray-500",children:s.mime_type})]})]})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:(0,r.sS)(s.size)}),(0,i.jsxs)("td",{className:"px-4 py-4 text-sm text-gray-600",children:[i.jsx("div",{children:S(s.uploaded_at)}),(0,i.jsxs)("div",{className:"text-xs text-gray-500",children:["by ",s.uploaded_by]})]}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("div",{className:"flex flex-wrap gap-1",children:0===s.linked_items.length?i.jsx("span",{className:"text-xs text-gray-500",children:"No links"}):s.linked_items.map((e,t)=>(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded",children:[e.item_type,":",e.item_id.substring(0,8),"...",i.jsx("button",{onClick:t=>{t.stopPropagation(),I(s.id,e.item_type,e.item_id)},disabled:b===s.id,className:"ml-1 text-red-500 hover:text-red-700 disabled:opacity-50",title:"Remove link",children:"\xd7"})]},t))})}),i.jsx("td",{className:"px-4 py-4",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-green-100 text-green-700 rounded",children:"✓ Uploaded"}),s.pii_flag&&i.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-orange-100 text-orange-700 rounded",children:"⚠️ PII"})]})}),i.jsx("td",{className:"px-4 py-4",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:t=>{t.stopPropagation(),e?.(s)},className:"text-blue-600 hover:text-blue-800 text-sm","aria-label":"View evidence details",children:"View"}),d&&i.jsx("button",{onClick:e=>{e.stopPropagation(),f(s.id)},className:"text-green-600 hover:text-green-800 text-sm","aria-label":"Link to item",disabled:b===s.id,children:"\uD83D\uDD17 Link"}),i.jsx("button",{onClick:e=>{e.stopPropagation(),navigator.clipboard.writeText(s.checksum_sha256),alert("Checksum copied to clipboard")},className:"text-gray-600 hover:text-gray-800 text-sm",title:"Copy checksum","aria-label":"Copy checksum",children:"\uD83D\uDCCB"})]})})]},s.id))})]})}),i.jsx("div",{className:"flex justify-between items-center",children:(()=>{if(!c)return null;let{page:e,total_pages:s,has_previous:t,has_next:a}=c;return(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Items per page:"}),(0,i.jsxs)("select",{value:v,onChange:e=>_(Number(e.target.value)),className:"border rounded px-2 py-1 text-sm",children:[i.jsx("option",{value:10,children:"10"}),i.jsx("option",{value:20,children:"20"}),i.jsx("option",{value:50,children:"50"}),i.jsx("option",{value:100,children:"100"})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>D(1),disabled:!t,className:"px-2 py-1 text-sm border rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"\xab\xab"}),i.jsx("button",{onClick:()=>D(e-1),disabled:!t,className:"px-2 py-1 text-sm border rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"‹"}),(0,i.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",e," of ",s]}),i.jsx("button",{onClick:()=>D(e+1),disabled:!a,className:"px-2 py-1 text-sm border rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"›"}),i.jsx("button",{onClick:()=>D(s),disabled:!a,className:"px-2 py-1 text-sm border rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"\xbb\xbb"})]})]})})()}),N&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Link Evidence to Item"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Type"}),(0,i.jsxs)("select",{value:w.itemType,onChange:e=>k(s=>({...s,itemType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:b===N,children:[i.jsx("option",{value:"assessment",children:"Assessment"}),i.jsx("option",{value:"question",children:"Question"}),i.jsx("option",{value:"framework",children:"Framework"}),i.jsx("option",{value:"control",children:"Control"})]})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item ID"}),i.jsx("input",{type:"text",value:w.itemId,onChange:e=>k(s=>({...s,itemId:e.target.value})),placeholder:"Enter the ID of the item to link to",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:b===N})]})]}),(0,i.jsxs)("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:()=>P(N),disabled:b===N,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:b===N?"Creating Link...":"Create Link"}),i.jsx("button",{onClick:()=>{f(null),k({itemType:"assessment",itemId:""})},disabled:b===N,className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 disabled:opacity-50",children:"Cancel"})]})]})})]}):i.jsx("div",{className:`${t}`,role:"status",children:(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx("div",{className:"text-4xl mb-4","aria-hidden":"true",children:"\uD83D\uDCC2"}),i.jsx("div",{className:"text-gray-600 mb-2",children:"No evidence files found"}),i.jsx("div",{className:"text-sm text-gray-500",children:"Upload files to see them here"})]})})}function c({evidence:e,onClose:s,onLinked:t,className:l=""}){let[d,n]=(0,a.useState)({itemType:"",itemId:""}),[c,x]=(0,a.useState)(!1),[o,m]=(0,a.useState)(null),h=(0,a.useCallback)(async()=>{if(e&&d.itemType.trim()&&d.itemId.trim()){x(!0),m(null);try{await (0,r.tc)(e.id,{item_type:d.itemType.trim(),item_id:d.itemId.trim()}),n({itemType:"",itemId:""}),t?.()}catch(e){m(e instanceof Error?e.message:"Failed to create link")}finally{x(!1)}}},[e,d,t]);return e?(0,i.jsxs)("div",{className:`space-y-4 ${l}`,children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Evidence Preview"}),s&&i.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),i.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,i.jsxs)("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"text-3xl",children:(0,r.LP)(e.mime_type)}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"text-lg font-medium text-gray-900 truncate",children:e.filename}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-2 text-sm text-gray-600",children:[(0,i.jsxs)("div",{children:[i.jsx("span",{className:"font-medium",children:"Size:"})," ",(0,r.sS)(e.size)]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"font-medium",children:"Type:"})," ",e.mime_type]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"font-medium",children:"Uploaded:"})," ",new Date(e.uploaded_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"font-medium",children:"By:"})," ",e.uploaded_by]})]}),e.pii_flag&&i.jsx("div",{className:"mt-2 inline-flex items-center px-2 py-1 text-xs bg-orange-100 text-orange-700 rounded",children:"⚠️ Potential PII detected"})]})]})}),(0,i.jsxs)("div",{className:"bg-white border rounded-lg",children:[(0,i.jsxs)("div",{className:"border-b px-4 py-3",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:"File Preview"}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Preview capabilities are being enhanced. Current view shows file structure and planned features."})]}),i.jsx("div",{className:"p-4",children:(()=>{if(!e)return null;let s=e.mime_type.startsWith("image/"),t=e.mime_type.includes("pdf"),a=e.mime_type.startsWith("text/"),l=e.mime_type.includes("document")||e.mime_type.includes("word"),d=e.mime_type.includes("sheet")||e.mime_type.includes("excel"),n=e.mime_type.includes("presentation")||e.mime_type.includes("powerpoint");return s?(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 p-6",children:[(0,i.jsxs)("div",{className:"text-center mb-4",children:[i.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDDBC️"}),i.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Image File"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Visual content preview - Enhanced viewer coming soon"})]}),i.jsx("div",{className:"bg-white rounded p-4 border",children:(0,i.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Type:"})," ",e.mime_type]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Resolution:"})," Preview will show actual dimensions"]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Color Space:"})," Will display color profile information"]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Usage:"})," Can be linked to assessment questions for evidence"]})]})})]}):t?(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 p-6",children:[(0,i.jsxs)("div",{className:"text-center mb-4",children:[i.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDCC4"}),i.jsx("div",{className:"text-sm font-medium text-gray-700",children:"PDF Document"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Document viewer with text search - Enhanced PDF viewer coming soon"})]}),i.jsx("div",{className:"bg-white rounded p-4 border space-y-3",children:(0,i.jsxs)("div",{className:"text-xs text-gray-600",children:[i.jsx("div",{children:i.jsx("strong",{children:"Features Coming:"})}),(0,i.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[i.jsx("li",{children:"Page-by-page navigation"}),i.jsx("li",{children:"Text search and highlighting"}),i.jsx("li",{children:"Zoom and pan controls"}),i.jsx("li",{children:"Annotation and markup tools"}),i.jsx("li",{children:"Direct citation linking"})]})]})})]}):l?(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 p-6",children:[(0,i.jsxs)("div",{className:"text-center mb-4",children:[i.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDCDD"}),i.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Word Document"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Rich document viewer with formatting - Enhanced viewer coming soon"})]}),i.jsx("div",{className:"bg-white rounded p-4 border",children:(0,i.jsxs)("div",{className:"text-xs text-gray-600 space-y-2",children:[(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Content Preview:"})," Will show formatted text, tables, and images"]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Search:"})," Full-text search with context highlighting"]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Navigation:"})," Section and heading-based navigation"]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Linking:"})," Link specific paragraphs to assessment items"]})]})})]}):d?(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 p-6",children:[(0,i.jsxs)("div",{className:"text-center mb-4",children:[i.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDCCA"}),i.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Spreadsheet"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Interactive data viewer - Enhanced spreadsheet viewer coming soon"})]}),i.jsx("div",{className:"bg-white rounded p-4 border",children:(0,i.jsxs)("div",{className:"text-xs text-gray-600 space-y-2",children:[(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Data View:"})," Will display worksheets with filtering and sorting"]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Charts:"})," Embedded charts and graphs will be rendered"]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Export:"})," Extract specific data ranges for evidence"]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Analysis:"})," Quick statistics and data validation"]})]})})]}):n?(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 p-6",children:[(0,i.jsxs)("div",{className:"text-center mb-4",children:[i.jsx("div",{className:"text-4xl mb-2",children:"\uD83C\uDFAF"}),i.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Presentation"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Slide viewer with thumbnails - Enhanced presentation viewer coming soon"})]}),i.jsx("div",{className:"bg-white rounded p-4 border",children:(0,i.jsxs)("div",{className:"text-xs text-gray-600 space-y-2",children:[(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Slides:"})," Will show thumbnail grid and slide-by-slide view"]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Content:"})," Text extraction and image preview"]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Navigation:"})," Quick jump to specific slides"]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Evidence:"})," Link individual slides to assessment questions"]})]})})]}):a?(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 p-6",children:[(0,i.jsxs)("div",{className:"text-center mb-4",children:[i.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDCC4"}),i.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Text Document"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Syntax-highlighted text viewer - Enhanced text viewer coming soon"})]}),i.jsx("div",{className:"bg-white rounded p-4 border",children:(0,i.jsxs)("div",{className:"text-xs text-gray-600 space-y-2",children:[(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Display:"})," Will show formatted text with line numbers"]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Search:"})," Pattern matching and regex support"]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Highlighting:"})," Syntax highlighting for code files"]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Selection:"})," Quote specific lines for evidence"]})]})})]}):(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 p-6",children:[(0,i.jsxs)("div",{className:"text-center mb-4",children:[i.jsx("div",{className:"text-4xl mb-2",children:(0,r.LP)(e.mime_type)}),i.jsx("div",{className:"text-sm font-medium text-gray-700",children:"File Preview"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Specialized viewer for this file type - Enhanced preview coming soon"})]}),i.jsx("div",{className:"bg-white rounded p-4 border",children:(0,i.jsxs)("div",{className:"text-xs text-gray-600 space-y-2",children:[(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Type:"})," ",e.mime_type]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Preview:"})," Custom viewer will be developed for this file type"]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Download:"})," Full file access available through secure download"]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Metadata:"})," File properties and embedded information will be extracted"]})]})})]})})()})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:"Linked Items"}),0===e.linked_items.length?i.jsx("div",{className:"text-sm text-gray-500 italic",children:"No linked items"}):i.jsx("div",{className:"space-y-2",children:e.linked_items.map((e,s)=>i.jsx("div",{className:"flex items-center justify-between bg-blue-50 rounded px-3 py-2",children:(0,i.jsxs)("div",{className:"text-sm",children:[(0,i.jsxs)("span",{className:"font-medium",children:[e.item_type,":"]})," ",e.item_id]})},s))}),(0,i.jsxs)("div",{className:"border-t pt-3",children:[i.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Add New Link"}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("input",{type:"text",placeholder:"Item type (e.g., assessment)",value:d.itemType,onChange:e=>n(s=>({...s,itemType:e.target.value})),disabled:c,className:"px-3 py-2 border rounded text-sm"}),i.jsx("input",{type:"text",placeholder:"Item ID",value:d.itemId,onChange:e=>n(s=>({...s,itemId:e.target.value})),disabled:c,className:"px-3 py-2 border rounded text-sm"})]}),o&&i.jsx("div",{className:"text-sm text-red-600",children:o}),i.jsx("button",{onClick:h,disabled:c||!d.itemType.trim()||!d.itemId.trim(),className:"w-full px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Creating Link...":"Add Link"})]})]})]}),(0,i.jsxs)("div",{className:"border-t pt-4",children:[i.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"File Metadata"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Evidence ID:"}),i.jsx("span",{className:"font-mono text-xs",children:e.id})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Checksum (SHA-256):"}),(0,i.jsxs)("span",{className:"font-mono text-xs cursor-pointer hover:bg-gray-100 px-1 rounded",onClick:()=>{navigator.clipboard.writeText(e.checksum_sha256),alert("Checksum copied to clipboard")},title:"Click to copy",children:[e.checksum_sha256.substring(0,16),"..."]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Blob Path:"}),i.jsx("span",{className:"font-mono text-xs text-gray-500 truncate max-w-xs",children:e.blob_path})]})]})]})]}):i.jsx("div",{className:`${l}`,children:i.jsx("div",{className:"flex items-center justify-center h-96 bg-gray-50 rounded border-2 border-dashed border-gray-300",children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDCC2"}),i.jsx("div",{className:"text-gray-600",children:"Select an evidence file to preview"})]})})})}var x=t(79682);function o(){let{engagementId:e}=(0,l.useParams)(),[s,t]=(0,a.useState)(null),[r,o]=(0,a.useState)(0),[m,h]=(0,a.useState)("table"),u=(0,x.QL)(),g=(0,a.useCallback)(e=>{o(e=>e+1),t(e),h("table"),setTimeout(()=>{let s=document.createElement("div");s.className="fixed top-4 right-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded z-50",s.innerHTML=`<strong>Success!</strong> ${e.filename} uploaded successfully`,document.body.appendChild(s),setTimeout(()=>{s.remove()},5e3)},100)},[]),p=(0,a.useCallback)(e=>{t(e),h("preview")},[]),v=(0,a.useCallback)(()=>{o(e=>e+1)},[]),j=(0,a.useCallback)(()=>{t(null),h("table")},[]);return u.isLoading?i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"text-center",children:"Loading..."})}):e?(0,i.jsxs)("div",{className:"p-6 space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Evidence Management"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Upload, organize, and link evidence files for this engagement"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 border rounded-lg p-1",children:[i.jsx("button",{onClick:()=>h("upload"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${"upload"===m?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-900"}`,children:"Upload"}),i.jsx("button",{onClick:()=>h("table"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${"table"===m?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-900"}`,children:"Browse"}),i.jsx("button",{onClick:()=>h("preview"),disabled:!s,className:`px-3 py-1 rounded text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${"preview"===m?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-900"}`,children:"Preview"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,i.jsxs)("div",{className:"lg:col-span-2",children:["upload"===m&&(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[i.jsx("h2",{className:"text-lg font-medium mb-4",children:"Upload Evidence"}),i.jsx(d.Z,{onUploadComplete:g,className:"max-w-2xl"})]}),(0,i.jsxs)("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-4",children:"Recent Uploads"}),i.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Files appear here instantly after upload"}),i.jsx(n,{onEvidenceSelect:p,refreshTrigger:r,className:"max-h-96 overflow-y-auto",showLinkActions:!0})]})]}),"table"===m&&(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-lg font-medium",children:"Evidence Files"}),i.jsx("button",{onClick:()=>h("upload"),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Upload New File"})]}),i.jsx(n,{onEvidenceSelect:p,refreshTrigger:r,showLinkActions:!0})]}),"preview"===m&&i.jsx("div",{children:i.jsx(c,{evidence:s,onClose:j,onLinked:v})})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium mb-3",children:"Quick Actions"}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx("button",{onClick:()=>h("upload"),className:"w-full px-3 py-2 text-left text-sm bg-white border rounded hover:bg-gray-50",children:"\uD83D\uDCE4 Upload Evidence"}),i.jsx("button",{onClick:()=>h("table"),className:"w-full px-3 py-2 text-left text-sm bg-white border rounded hover:bg-gray-50",children:"\uD83D\uDCCB Browse All Files"}),i.jsx("button",{onClick:()=>{s&&(navigator.clipboard.writeText(s.checksum_sha256),alert("Checksum copied to clipboard"))},disabled:!s,className:"w-full px-3 py-2 text-left text-sm bg-white border rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"\uD83D\uDCCB Copy Checksum"})]})]}),s&&(0,i.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium mb-2 text-blue-900",children:"Selected File"}),(0,i.jsxs)("div",{className:"text-sm space-y-1 text-blue-800",children:[i.jsx("div",{className:"font-medium truncate",children:s.filename}),(0,i.jsxs)("div",{children:["Size: ",(s.size/1024/1024).toFixed(1)," MB"]}),(0,i.jsxs)("div",{children:["Links: ",s.linked_items.length]}),s.pii_flag&&i.jsx("div",{className:"text-orange-700",children:"⚠️ Contains PII"})]}),i.jsx("button",{onClick:()=>h("preview"),className:"mt-3 w-full px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"View Details"})]}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium mb-3",children:"Guidelines"}),(0,i.jsxs)("div",{className:"text-sm text-gray-600 space-y-2",children:[i.jsx("div",{children:"• Maximum file size: 25 MB"}),i.jsx("div",{children:"• Supported formats: PDF, DOCX, XLSX, PPTX, TXT, CSV, Images, ZIP"}),i.jsx("div",{children:"• Files are automatically scanned for PII"}),i.jsx("div",{children:"• Use links to connect evidence to assessments"}),i.jsx("div",{children:"• All uploads are audit logged"})]})]}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium mb-3",children:"Summary"}),(0,i.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[i.jsx("div",{children:"\uD83D\uDCC1 Files: Loading..."}),i.jsx("div",{children:"\uD83D\uDD17 Links: Loading..."}),i.jsx("div",{children:"⚠️ PII Files: Loading..."})]})]})]})]})]}):i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"text-center text-red-600",children:"No engagement selected."})})}},9977:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});let i=(0,t(68570).createProxy)(String.raw`/Users/valsysoiev/AI-Enable-Cyber-Maturity-Assessment-2/web/app/e/[engagementId]/evidence/page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),i=s.X(0,[276,878,183,392],()=>t(52821));module.exports=i})();