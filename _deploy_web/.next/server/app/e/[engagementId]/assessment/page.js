(()=>{var e={};e.id=665,e.ids=[665],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},72480:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>g,tree:()=>d}),t(8365),t(56698),t(35866);var r=t(23191),a=t(88716),n=t(37922),i=t.n(n),l=t(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let d=["",{children:["e",{children:["[engagementId]",{children:["assessment",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8365)),"/Users/valsysoiev/AI-Enable-Cyber-Maturity-Assessment-2/web/app/e/[engagementId]/assessment/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,56698)),"/Users/valsysoiev/AI-Enable-Cyber-Maturity-Assessment-2/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/valsysoiev/AI-Enable-Cyber-Maturity-Assessment-2/web/app/e/[engagementId]/assessment/page.tsx"],m="/e/[engagementId]/assessment/page",u={require:t,loadChunk:()=>Promise.resolve()},g=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/e/[engagementId]/assessment/page",pathname:"/e/[engagementId]/assessment",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},97380:(e,s,t)=>{Promise.resolve().then(t.bind(t,8294))},8294:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var r=t(10326),a=t(17577),n=t(35047),i=t(6824);let l=new Map;async function o(){let e="csf:functions",s=function(e){let s=l.get(e);return s?Date.now()-s.timestamp>3e5?(l.delete(e),null):s.data:null}(e);if(s)return s;try{let s=(await (0,i.SC)("/api/v1/csf/functions",{timeout:1e4})).functions;return l.set(e,{data:s,timestamp:Date.now()}),s}catch(e){throw console.error("Error loading CSF functions:",e),Error(e instanceof Error?e.message:"Failed to load CSF taxonomy")}}var d=t(79682);function c({functions:e,onSubcategorySelect:s,selectedSubcategory:t}){let[n,i]=(0,a.useState)(new Set),l=e=>{i(s=>{let t=new Set(s);return t.has(e)?t.delete(e):t.add(e),t})};return r.jsx("div",{className:"space-y-4",children:e.map(e=>(0,r.jsxs)("div",{className:"border rounded-lg",children:[(0,r.jsxs)("button",{onClick:()=>l(e.id),className:"w-full px-4 py-3 text-left bg-gray-50 hover:bg-gray-100 rounded-t-lg font-medium flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-semibold",children:e.id})," - ",e.title]}),r.jsx("span",{className:"text-gray-500",children:n.has(e.id)?"âˆ’":"+"})]}),n.has(e.id)&&(0,r.jsxs)("div",{className:"p-4 space-y-3",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),r.jsx("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:e.categories.map(e=>(0,r.jsxs)("div",{className:"border rounded-lg p-3 bg-white",children:[(0,r.jsxs)("div",{className:"font-medium text-sm mb-2",children:[e.id," - ",e.title]}),r.jsx("p",{className:"text-xs text-gray-600 mb-2",children:e.description}),r.jsx("div",{className:"space-y-1",children:e.subcategories.map(e=>(0,r.jsxs)("button",{onClick:()=>s(e),className:`w-full text-left px-2 py-1 rounded text-xs hover:bg-blue-50 ${t?.id===e.id?"bg-blue-100 text-blue-700 font-medium":"text-gray-700"}`,children:[e.id," - ",e.title]},e.id))})]},e.id))})]})]},e.id))})}function m({subcategory:e}){return(0,r.jsxs)("div",{className:"bg-white border rounded-lg p-6 space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-semibold text-lg",children:e.id}),r.jsx("h4",{className:"text-gray-600 mb-2",children:e.title}),r.jsx("p",{className:"text-sm text-gray-700",children:e.description})]}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[r.jsx("h4",{className:"font-medium mb-2",children:"Assessment Score"}),(0,r.jsxs)("div",{className:"bg-gray-50 p-3 rounded text-center text-gray-500",children:[r.jsx("div",{children:"Score: Not Assessed"}),r.jsx("div",{className:"text-xs mt-1",children:"Scoring functionality coming soon"})]})]}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[r.jsx("h4",{className:"font-medium mb-2",children:"Rationale"}),(0,r.jsxs)("div",{className:"bg-gray-50 p-3 rounded text-center text-gray-500",children:[r.jsx("div",{children:"No rationale provided"}),r.jsx("div",{className:"text-xs mt-1",children:"Rationale input coming soon"})]})]}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[r.jsx("h4",{className:"font-medium mb-2",children:"Evidence"}),(0,r.jsxs)("div",{className:"bg-gray-50 p-3 rounded text-center text-gray-500",children:[r.jsx("div",{children:"No evidence uploaded"}),r.jsx("div",{className:"text-xs mt-1",children:"Evidence tray coming soon"})]})]})]})}function u(){let{engagementId:e}=(0,n.useParams)(),[s,t]=(0,a.useState)([]),[i,l]=(0,a.useState)(!0),[u,g]=(0,a.useState)(null),[x,h]=(0,a.useState)(),p=(0,d.QL)(),b=async()=>{try{l(!0);let e=await o();t(e),e.length}catch(e){console.error("Error loading CSF data:",e),g(e instanceof Error?e.message:"Failed to load CSF data")}finally{l(!1)}},j=(0,a.useMemo)(()=>s.length?{functions:s.length,categories:s.reduce((e,s)=>e+s.categories.length,0),subcategories:s.reduce((e,s)=>e+s.categories.reduce((e,s)=>e+s.subcategories.length,0),0)}:{functions:0,categories:0,subcategories:0},[s]);return p.isLoading?r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"text-center",children:"Loading..."})}):i?r.jsx("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"animate-pulse space-y-4",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),r.jsx("div",{className:"h-32 bg-gray-200 rounded"}),r.jsx("div",{className:"h-32 bg-gray-200 rounded"})]})}):u?r.jsx("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium text-red-800",children:"Error Loading Assessment"}),r.jsx("p",{className:"text-red-600 text-sm mt-1",children:u}),r.jsx("button",{onClick:b,className:"mt-3 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm",children:"Retry"})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"CSF 2.0 Assessment Grid"}),(0,r.jsxs)("p",{className:"text-gray-600 text-sm mt-1",children:["Engagement: ",e]}),(0,r.jsxs)("div",{className:"flex gap-4 text-sm text-gray-500 mt-2",children:[(0,r.jsxs)("span",{children:[j.functions," Functions"]}),(0,r.jsxs)("span",{children:[j.categories," Categories"]}),(0,r.jsxs)("span",{children:[j.subcategories," Subcategories"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsx(c,{functions:s,onSubcategorySelect:h,selectedSubcategory:x})}),r.jsx("div",{className:"lg:col-span-1",children:x?r.jsx(m,{subcategory:x}):(0,r.jsxs)("div",{className:"bg-white border rounded-lg p-6 text-center text-gray-500",children:[r.jsx("h3",{className:"font-medium mb-2",children:"Select a Subcategory"}),r.jsx("p",{className:"text-sm",children:"Click on any subcategory from the grid to view details and assessment options."})]})})]})]})})}},6824:(e,s,t)=>{"use strict";t.d(s,{$V:()=>d,SC:()=>i,Sg:()=>o,tQ:()=>l});var r=t(2991);let a=process.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8000";function n(){let e=(0,r.OD)(),s=(0,r.K3)(),t={};return e&&(t["X-User-Email"]=e),s&&(t["X-Engagement-ID"]=s),t}async function i(e,s={}){let t=n(),r=new AbortController,i=setTimeout(()=>r.abort(),s.timeout||3e4);try{let n=await fetch(`${a}${e}`,{...s,signal:r.signal,headers:{...t,...s.headers}});if(clearTimeout(i),!n.ok){let e=await n.json().catch(()=>({detail:"Request failed"}));throw Error(e.detail||`Request failed: ${n.status}`)}return n.json()}catch(e){if(clearTimeout(i),e instanceof Error&&"AbortError"===e.name)throw Error("Request timeout - please try again");throw e}}async function l(e){let s=new AbortController,t=setTimeout(()=>s.abort(),3e4);try{let r=await fetch(`${a}/presets/${e}`,{cache:"no-store",signal:s.signal});if(clearTimeout(t),!r.ok)throw Error(`Preset ${e} not found`);return r.json()}catch(s){if(clearTimeout(t),s instanceof Error&&"AbortError"===s.name)throw console.error("Preset fetch timeout:",e),Error("Request timeout - please try again");throw console.error("Error fetching preset:",s),s}}let o=a;function d(e=!1){let s=n();return e||(s["Content-Type"]="application/json"),s}},2991:(e,s,t)=>{"use strict";function r(){return""}function a(){return""}function n(e){}function i(){return(process.env.NEXT_PUBLIC_ADMIN_EMAILS||"").split(",").map(e=>e.trim().toLowerCase()).includes("")}t.d(s,{GJ:()=>i,K3:()=>a,OD:()=>r,d8:()=>n})},8365:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(68570).createProxy)(String.raw`/Users/valsysoiev/AI-Enable-Cyber-Maturity-Assessment-2/web/app/e/[engagementId]/assessment/page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,878,183],()=>t(72480));module.exports=r})();