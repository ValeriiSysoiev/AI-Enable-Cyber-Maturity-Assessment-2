# Environment Configuration Template
# Copy this file to .env and update with actual values
# NEVER commit real secrets or credentials to version control

# =============================================================================
# SECRET MANAGEMENT CONFIGURATION
# =============================================================================

# Secret provider configuration
USE_KEYVAULT=false
AZURE_KEYVAULT_URL=https://your-keyvault.vault.azure.net/

# =============================================================================
# COSMOS DB CONFIGURATION
# =============================================================================

# Cosmos DB connection (required for data persistence)
COSMOS_ENDPOINT=https://your-account.documents.azure.com:443/
COSMOS_DATABASE=cybermaturity

# =============================================================================
# AZURE OPENAI CONFIGURATION
# =============================================================================

# Azure OpenAI service configuration
AZURE_OPENAI_ENDPOINT=https://your-openai.openai.azure.com/
AZURE_OPENAI_API_KEY=your-api-key-here
AZURE_OPENAI_API_VERSION=2024-02-01
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-3-large
AZURE_OPENAI_EMBEDDING_MODEL=text-embedding-3-large
AZURE_OPENAI_EMBEDDING_DIMENSIONS=3072
AZURE_OPENAI_MAX_TOKENS=8000

# =============================================================================
# AZURE SEARCH CONFIGURATION
# =============================================================================

# Azure AI Search service configuration
AZURE_SEARCH_ENDPOINT=https://your-search.search.windows.net/
AZURE_SEARCH_API_KEY=your-search-api-key
AZURE_SEARCH_INDEX_NAME=eng-docs
AZURE_SEARCH_API_VERSION=2024-07-01

# =============================================================================
# AZURE STORAGE CONFIGURATION
# =============================================================================

# Azure Blob Storage (optional)
USE_BLOB_STORAGE=false
AZURE_STORAGE_ACCOUNT=yourstorageaccount
AZURE_STORAGE_CONTAINER=documents

# =============================================================================
# AZURE ACTIVE DIRECTORY CONFIGURATION
# =============================================================================

# AAD Groups integration
AUTH_GROUPS_MODE=disabled
AAD_TENANT_ID=your-tenant-id
AAD_CLIENT_ID=your-client-id
AAD_CLIENT_SECRET=your-client-secret
AAD_GROUP_MAP_JSON={}
AAD_CACHE_TTL_MINUTES=15
AAD_REQUIRE_TENANT_ISOLATION=true
AAD_ALLOWED_TENANT_IDS=tenant-id-1,tenant-id-2

# =============================================================================
# RAG CONFIGURATION
# =============================================================================

# Retrieval-Augmented Generation settings
RAG_MODE=none
RAG_FEATURE_FLAG=true
RAG_SEARCH_BACKEND=azure_search
RAG_SEARCH_TOP_K=10
RAG_SIMILARITY_THRESHOLD=0.7
RAG_USE_HYBRID_SEARCH=true
RAG_RERANK_ENABLED=false
RAG_MAX_DOCUMENT_LENGTH=100000
RAG_COSMOS_CONTAINER=embeddings
RAG_CHUNK_SIZE=1500
RAG_CHUNK_OVERLAP=0.1
RAG_BATCH_SIZE=10
RAG_RATE_LIMIT=100

# =============================================================================
# EMBEDDING CONFIGURATION
# =============================================================================

# Text chunking and embedding settings
EMBEDDING_CHUNK_SIZE=800
EMBEDDING_CHUNK_OVERLAP=200
EMBEDDING_BATCH_SIZE=16
EMBEDDING_MAX_RETRIES=3
EMBEDDING_RETRY_DELAY=1.0

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================

# Local storage settings
UPLOAD_ROOT=data/engagements
MAX_UPLOAD_MB=10

# =============================================================================
# ORCHESTRATOR SERVICES
# =============================================================================

# Microservice URLs (local development)
DATA_DIR=./data
ORCHESTRATOR_URL=http://localhost:8010
DOC_ANALYZER_URL=http://localhost:8111
GAP_ANALYSIS_URL=http://localhost:8121
INITIATIVE_URL=http://localhost:8131
PRIORITIZATION_URL=http://localhost:8141
ROADMAP_URL=http://localhost:8151
REPORT_URL=http://localhost:8161

# =============================================================================
# MCP (Model Context Protocol) CONFIGURATION
# =============================================================================

# MCP Gateway integration settings
MCP_ENABLED=false
MCP_GATEWAY_URL=http://localhost:8020
MCP_TIMEOUT_SECONDS=30
MCP_MAX_RETRIES=3
MCP_RETRY_DELAY_SECONDS=1

# =============================================================================
# LOGGING AND MONITORING
# =============================================================================

# Logging configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
CORRELATION_ID_HEADER=X-Correlation-ID

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================

# In-process caching settings
CACHE_ENABLED=true
CACHE_PRESETS_MAX_SIZE_MB=100
CACHE_PRESETS_TTL_SECONDS=3600
CACHE_PRESETS_MAX_ENTRIES=100
CACHE_FRAMEWORK_MAX_SIZE_MB=50
CACHE_FRAMEWORK_TTL_SECONDS=1800
CACHE_FRAMEWORK_MAX_ENTRIES=50
CACHE_USER_ROLES_MAX_SIZE_MB=20
CACHE_USER_ROLES_TTL_SECONDS=900
CACHE_USER_ROLES_MAX_ENTRIES=1000
CACHE_ASSESSMENT_SCHEMAS_MAX_SIZE_MB=75
CACHE_ASSESSMENT_SCHEMAS_TTL_SECONDS=3600
CACHE_ASSESSMENT_SCHEMAS_MAX_ENTRIES=200
CACHE_DOCUMENT_METADATA_MAX_SIZE_MB=30
CACHE_DOCUMENT_METADATA_TTL_SECONDS=600
CACHE_DOCUMENT_METADATA_MAX_ENTRIES=500
CACHE_CLEANUP_INTERVAL_SECONDS=300

# =============================================================================
# PERFORMANCE MONITORING
# =============================================================================

# Performance tracking
PERF_SLOW_REQUEST_THRESHOLD_MS=1000
PERF_ENABLE_REQUEST_TIMING=true
PERF_SLOW_QUERY_THRESHOLD_MS=500
PERF_ENABLE_QUERY_TIMING=true
PERF_ENABLE_CACHE_METRICS=true
PERF_CACHE_METRICS_INTERVAL_SECONDS=60
PERF_INCLUDE_TIMING_HEADERS=true
PERF_INCLUDE_CACHE_HEADERS=false
PERF_ENABLE_MEMORY_MONITORING=false
PERF_MEMORY_CHECK_INTERVAL_SECONDS=300
PERF_ENABLE_ALERTS=false
PERF_ALERT_SLOW_REQUEST_COUNT=10
PERF_ALERT_TIME_WINDOW_MINUTES=5

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Admin configuration
ADMIN_EMAILS=admin@example.com,admin2@example.com

# CORS configuration
API_ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com

# =============================================================================
# SECURITY NOTES
# =============================================================================
# 
# 1. When USE_KEYVAULT=true, ensure your application has Managed Identity
#    access to the specified Key Vault
# 
# 2. Store sensitive values as secrets in Key Vault with these naming conventions:
#    - cosmos-endpoint, cosmos-key
#    - azure-openai-api-key
#    - azure-search-api-key
#    - azure-storage-key
#    - aad-client-secret
# 
# 3. Use environment variables for local development only
# 
# 4. Never commit real secrets to version control
# 
# 5. Rotate secrets regularly and monitor access logs
